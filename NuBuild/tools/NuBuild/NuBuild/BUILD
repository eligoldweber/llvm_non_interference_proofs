load(
  "@io_bazel_rules_dotnet//dotnet:defs.bzl",
  "dotnet_binary", "mono_register_sdk","dotnet_library", "dotnet_import_library"
)
dotnet_import_library(
  name = "AzureStorage",
  src = "Microsoft.WindowsAzure.Storage.dll"
)
dotnet_import_library(
  name = "AzureCommon",
  src = "Microsoft.WindowsAzure.Common.dll"
)

dotnet_binary(
  name = "NuBuild",
  srcs = [
      "AbstractId.cs",
      "AnnotationScanner.cs",
      "AsmRewriterVerb.cs",
      "DafnyExecutableDependencies.cs",
      "IProcessInvoker.cs",
      "VerbRunner.cs",
      "BatchVerifyVerb.cs",
      "BeatExtensions.cs",
      "BasmObligationIncludes.cs",
      "BasmTransitiveDepsVerb.cs",
      "BoogieAsmVerificationObligationListVerb.cs",
      "BoogieAsmWorkerBase.cs",
      "BootableAppVerb.cs",
      "IProcessInvokeAsyncVerb.cs",
      "IronRootDirectory.cs",
      "ObjectFailedException.cs",
      "ObjectNotReadyException.cs",
      "ProcessInvokeAsyncWorker.cs",
      "Repository.cs",
      "VerbSyncWorker.cs",
      "ConcatContextVerb.cs",
      "ContextContents.cs",
      "ContextGeneratingVerb.cs",
      "CustomManifestParser.cs",
      "DafnyCompileOneVerb.cs",
      "DafnyExtensions.cs",
      "DafnyTransitiveDepsVerb.cs",
      "DbgVerbCounter.cs",
      "DependencyCache.cs",
      "DependencyDisposition.cs",
      "DbgHashSpeedTest.cs",
      "IAsmProducer.cs",
      "IContextGeneratingVerb.cs",
      "IncludePathContext.cs",
      "IObligationsProducer.cs",
      "IRejectable.cs",
      "IronfleetAppVerb.cs",
      "IVerbWorker.cs",
      "IVerificationResultParser.cs",
      "Job.cs",
      "LinkerVerb.cs",
      "Logger.cs",
      "NMakeVerb.cs",
      "ObjectMissingFromCacheException.cs",
      "OrderPreservingSet.cs",
      "SymDiffBaseVerb.cs",
      "SymDiffCombineVerb.cs",
      "SymDiffExtractVerb.cs",
      "SymDiffInferVerb.cs",
      "SymDiffMergeBaseVerb.cs",
      "SymDiffMergeConfigVerb.cs",
      "SymDiffMergeVerb.cs",
      "SymDiffEngine.cs",
      "PoundDefines.cs",
      "UnverifiedSentinelVirtualContents.cs",
      "VerificationRequest.cs",
      "VSProjectParser.cs",
      "VSSolutionParser.cs",
      "StaticContextVerb.cs",
      "TransitiveDepsContents.cs",
      "TransitiveDepsVerb.cs",
      "MasmVerb.cs",
      "VerbOutputsContextVerb.cs",
      "VerbOutputsContext.cs",
      "BeatIncludes.cs",
      "BeatVerb.cs",
      "BoogieAsmDepBase.cs",
      "BoogieAsmLinkVerb.cs",
      "BoogieAsmVerifyVerb.cs",
      "BoogieVerb.cs",
      "BackgroundWorker.cs",
      "BuildObject.cs",
      "BuildEngine.cs",
      "BuildObjectValuePointer.cs",
      "CachedHash.cs",
      "ConcatContext.cs",
      "EntryStitcherVerb.cs",
      "IIncludePathContext.cs",
      "IroncladAppVerb.cs",
      "DafnyCCVerb.cs",
      "DafnySpecVerb.cs",
      "DafnyTransformBaseVerb.cs",
      "IItemCache.cs",
      "Disposition.cs",
      "DafnyVerifyTreeVerb.cs",
      "DafnyIncludes.cs",
      "DafnyVerifyOneVerb.cs",
      "Hasher.cs",
      "IHasher.cs",
      "IIncludeFactory.cs",
      "SourcePathIncludeContext.cs",
      "IVerb.cs",
      "ItemCacheLocal.cs",
      "PathNormalizer.cs",
      "Presentater.cs",
      "Presentation.cs",
      "PresentationBuilder.cs",
      "ProcessInvoker.cs",
      "Program.cs",
      "Properties/AssemblyInfo.cs",
      "ResultSummaryRecord.cs",
      "Scheduler.cs",
      "SourceConfigurationError.cs",
      "SourcePath.cs",
      "UserError.cs",
      "Util.cs",
      "Verb.cs",
      "VerbToposorter.cs",
      "VerificationMessage.cs",
      "VerificationObligationList.cs",
      "VerificationResult.cs",
      "VerificationResultBoogieParser.cs",
      "VerificationResultDafnyParser.cs",
      "VerificationResultSummaryVerb.cs",
      "VerificationResultVerb.cs",
      "VirtualBuildObject.cs",
      "VirtualContents.cs",
      "VSSolutionVerb.cs",
      "WaitIndex.cs",
      "WinLinkerVerb.cs",
      "WorkingDirectory.cs",
      "XmlFiller.cs"
  ],
  deps = ["@io_bazel_rules_dotnet//dotnet/stdlib:System.Core.dll",
        "@io_bazel_rules_dotnet//dotnet/stdlib:System.dll",
        "@io_bazel_rules_dotnet//dotnet/stdlib:System.Xml.dll",
        "@io_bazel_rules_dotnet//dotnet/stdlib:System.Net.Http.dll",
        ":AzureStorage",
        ":AzureCommon"],
  visibility = ["//visibility:public"],
)
